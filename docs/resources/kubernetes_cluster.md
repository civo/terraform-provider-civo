---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "civo_kubernetes_cluster Resource - terraform-provider-civo"
subcategory: ""
description: |-
  Provides a Civo Kubernetes cluster resource. This can be used to create, delete, and modify clusters.
---

# civo_kubernetes_cluster (Resource)

Provides a Civo Kubernetes cluster resource. This can be used to create, delete, and modify clusters.

## Example Usage

```terraform
# Query xsmall instance size
data "civo_size" "xsmall" {
    filter {
        key = "type"
        values = ["kubernetes"]
    }

    sort {
        key = "ram"
        direction = "asc"
    }
}

# Create a firewall
resource "civo_firewall" "my-firewall" {
    name = "my-firewall"
}

# Create a firewall rule
resource "civo_firewall_rule" "kubernetes" {
    firewall_id = civo_firewall.my-firewall.id
    protocol = "tcp"
    start_port = "6443"
    end_port = "6443"
    cidr = ["0.0.0.0/0"]
    direction = "ingress"
    label = "kubernetes-api-server"
    action = "allow"
}

# Create a cluster without specific cluster type by default is k3s
resource "civo_kubernetes_cluster" "my-cluster" {
    name = "my-cluster"
    applications = "Portainer,Linkerd:Linkerd & Jaeger"
    firewall_id = civo_firewall.my-firewall.id
    pools {
        label = "front-end" // Optional
        size = element(data.civo_size.xsmall.sizes, 0).name
        node_count = 3
    }
}

# Create a cluster with k3s
resource "civo_kubernetes_cluster" "my-cluster" {
    name = "my-cluster"
    applications = "Portainer,Linkerd:Linkerd & Jaeger"
    firewall_id = civo_firewall.my-firewall.id
    cluster_type = "k3s"
    pools {
        label = "front-end" // Optional
        size = element(data.civo_size.xsmall.sizes, 0).name
        node_count = 3
    }
}


# Create a cluster with talos
resource "civo_kubernetes_cluster" "my-cluster" {
    name = "my-cluster"
    applications = "Portainer,Linkerd:Linkerd & Jaeger"
    firewall_id = civo_firewall.my-firewall.id
    cluster_type = "talos"
    pools {
        label = "front-end" // Optional
        size = element(data.civo_size.xsmall.sizes, 0).name
        node_count = 3
    }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `firewall_id` (String) The existing firewall ID to use for this cluster
- `pools` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--pools))

### Optional

- `applications` (String) Comma separated list of applications to install. Spaces within application names are fine, but shouldn't be either side of the comma. Application names are case-sensitive; the available applications can be listed with the Civo CLI: 'civo kubernetes applications ls'. If you want to remove a default installed application, prefix it with a '-', e.g. -Traefik. For application that supports plans, you can use 'app_name:app_plan' format e.g. 'Linkerd:Linkerd & Jaeger' or 'MariaDB:5GB'.
- `cluster_type` (String) The type of cluster to create, valid options are `k3s` or `talos` the default is `k3s`
- `cni` (String) The cni for the k3s to install (the default is `flannel`) valid options are `cilium` or `flannel`
- `kubernetes_version` (String) The version of k3s to install (optional, the default is currently the latest available)
- `name` (String) Name for your cluster, must be unique within your account
- `network_id` (String) The network for the cluster, if not declare we use the default one
- `num_target_nodes` (Number, Deprecated) The number of instances to create (optional, the default at the time of writing is 3)
- `region` (String) The region for the cluster, if not declare we use the region in declared in the provider
- `tags` (String) Space separated list of tags, to be used freely as required
- `target_nodes_size` (String, Deprecated) The size of each node (optional, the default is currently g4s.kube.medium)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `api_endpoint` (String) The API server endpoint of the cluster
- `created_at` (String) The timestamp when the cluster was created
- `dns_entry` (String) The DNS name of the cluster
- `id` (String) The ID of this resource.
- `installed_applications` (List of Object) (see [below for nested schema](#nestedatt--installed_applications))
- `kubeconfig` (String, Sensitive) The kubeconfig of the cluster
- `master_ip` (String) The IP address of the master node
- `ready` (Boolean) When cluster is ready, this will return `true`
- `status` (String) Status of the cluster

<a id="nestedblock--pools"></a>
### Nested Schema for `pools`

Required:

- `node_count` (Number) Number of nodes in the nodepool
- `size` (String) Size of the nodes in the nodepool

Optional:

- `label` (String) Node pool label, if you don't provide one, we will generate one for you
- `public_ip_node_pool` (Boolean) Node pool belongs to the public ip node pool

Read-Only:

- `instance_names` (List of String) Instance names in the nodepool


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)


<a id="nestedatt--installed_applications"></a>
### Nested Schema for `installed_applications`

Read-Only:

- `application` (String)
- `category` (String)
- `installed` (Boolean)
- `version` (String)

## Import

Import is supported using the following syntax:

```shell
# using ID
terraform import civo_kubernetes_cluster.my-cluster 1b8b2100-0e9f-4e8f-ad78-9eb578c2a0af
```
