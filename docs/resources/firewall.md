---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "civo_firewall Resource - terraform-provider-civo"
subcategory: "Civo Network"
description: |-
  Provides a Civo firewall resource. This can be used to create, modify, and delete firewalls.
---

# civo_firewall (Resource)

Provides a Civo firewall resource. This can be used to create, modify, and delete firewalls.

## Example Usage

* View firewalls after creation on the [CLI](https://www.civo.com/docs/overview/civo-cli):
```
civo firewall ls
```
* View firewalls after creation on the [Dashboard](https://dashboard.civo.com/firewalls)
* View firewall rules on [CLI](https://www.civo.com/docs/overview/civo-cli):
```
civo firewall rule ls example-firewall
```

### Custom ingress and egress rules firewall


```terraform
provider "civo" {
  region = "LON1"
}


resource "civo_network" "example" {
  label = "example-network"

}

resource "civo_firewall" "example" {
  name                 = "example-firewall"
  network_id           = civo_network.example.id
  create_default_rules = false # Needs to be false when custom rules are applied.
  ingress_rule {
    label      = "http"
    protocol   = "tcp"
    port_range = "80"
    cidr       = ["0.0.0.0"]
    action     = "allow"
  }

    ingress_rule {
    label      = "https"
    protocol   = "tcp"
    port_range = "443"
    cidr       = ["0.0.0.0"]
    action     = "allow"
  }

  ingress_rule {
    label      = "ssh"
    protocol   = "tcp"
    port_range = "22"
    cidr       = ["192.168.1.1/32", "192.168.10.4/32", "192.168.10.10/32"]
    action     = "allow"
  }

  egress_rule {
    label      = "all"
    protocol   = "tcp"
    port_range = "1-65535"
    cidr       = ["0.0.0.0/0"]
    action     = "allow"
  }
}


data "civo_disk_image" "debian" {
   filter {
        key = "name"
        values = ["debian-10"]
   }
}

# Create a new instance
resource "civo_instance" "example" {
    hostname = "example"
    notes = "This is an example instance"
    firewall_id = civo_firewall.example.id
    network_id = civo_network.example.id
    size = "g3.xsmall"
    disk_image = data.civo_disk_image.debian.diskimages[0].id
}
```

### Simple firewall 

This the minimum amount of code to create a firewall with default rules:

```terraform
# ...

resource "civo_firewall" "example" {
    name = "example-firewall"
    network_id = civo_network.example.id

}
```



## Argument Reference

### Required

- `name` (String) The firewall name

### Optional

- `create_default_rules` (Boolean) The create rules flag is used to create the default firewall rules, if is not defined will be set to true, and if you set to false you need to define at least one ingress or egress rule. Needs to be false if custom rules are set.
- `egress_rule` (Block Set) The egress rules, this is a list of rules that will be applied to the firewall (see [below for nested schema](#nestedblock--egress_rule))
- `ingress_rule` (Block Set) The ingress rules, this is a list of rules that will be applied to the firewall (see [below for nested schema](#nestedblock--ingress_rule))
- `network_id` (String) The firewall network, if is not defined we use the default network
- `region` (String) The firewall region, if is not defined we use the global defined in the provider

<a id="nestedblock--ingress_rule"></a>
### Nested Schema for `ingress_rule`

Required:

- `action` (String) The action of the rule can be allow or deny. When we set the `action = 'allow'`, this is going to add a rule to allow traffic. Similarly, setting `action = 'deny'` will deny the traffic.
- `cidr` (Set of String) The CIDR notation of the other end to affect, or a valid network CIDR (e.g. 0.0.0.0/0 to open for everyone or 1.2.3.4/32 to open just for a specific IP address)

Optional:

- `label` (String) A string that will be the displayed name/reference for this rule
- `port_range` (String) The port or port range to open, can be a single port or a range separated by a dash (`-`), e.g. `80` or `80-443`
- `protocol` (String) The protocol choice from `tcp`, `udp` or `icmp` (the default if unspecified is `tcp`)

Read-Only:

- `id` (String) The ID of the firewall rule. This is only set when the rule is created by terraform.

<a id="nestedblock--egress_rule"></a>
### Nested Schema for `egress_rule`

Required:

- `action` (String) The action of the rule can be allow or deny. When we set the `action = 'allow'`, this is going to add a rule to allow traffic. Similarly, setting `action = 'deny'` will deny the traffic.
- `cidr` (Set of String) The CIDR notation of the other end to affect, or a valid network CIDR (e.g. 0.0.0.0/0 to open for everyone or 1.2.3.4/32 to open just for a specific IP address)

Optional:

- `label` (String) A string that will be the displayed name/reference for this rule
- `port_range` (String) The port or port range to open, can be a single port or a range separated by a dash (`-`), e.g. `80` or `80-443`
- `protocol` (String) The protocol choice from `tcp`, `udp` or `icmp` (the default if unspecified is `tcp`)

Read-Only:

- `id` (String) The ID of the firewall rule. This is only set when the rule is created by terraform.


## Attributes Reference

- `id` (String) The ID of this resource.


## Import

Import is supported using the following syntax:

```shell
# using ID
terraform import civo_firewall.www b8ecd2ab-2267-4a5e-8692-cbf1d32583e3
```
